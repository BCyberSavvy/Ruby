Touch your two factor authentication device to complete authentication.

<script>

  u2f.sign([<%= raw authentication_request.serialized %>], function (result) {
    // if keyHandle is wrong, it fails with:
    // {errorCode: 1, errorMessage: "device status code: 2"}
    if (result.errorCode) {
      var errors = document.getElementsByClassName('fidologin-status')[0];
      if (result.errorCode == 4) {
        errors.innerHTML = "Unable to authenticate. You registered with a different device. Error code: " + result.errorCode;
      } else {
        errors.innerHTML = "Unable to authenticate. Error code: " + result.errorCode;
      }
      return;
    }
    var form = document.getElementById('fido-login-authentication');
    form.elements.keyHandle.value = result.keyHandle;
    form.elements.signatureData.value = result.signatureData;
    form.elements.clientData.value = result.clientData;
    form.submit();
  });
</script>
<%= form_tag(fido_login_authentication_path, method: :post, id: 'fido-login-authentication') do %>
  <%= hidden_field_tag :keyHandle %>
  <%= hidden_field_tag :signatureData %>
  <%= hidden_field_tag :clientData %>
<% end %>
